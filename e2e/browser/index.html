<html>
  <head>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }
      table,
      tr,
      td {
        border: 1px solid black;
        padding: 10px;
      }
      #results-row {
        width: 100%;
      }
    </style>
    <script src="../../dist/orbs-client-sdk.js"></script>
    <script>
      function CreateOrbsClient() {
        let result;
        try {
          const endpoint = document.querySelector("#endpoint").value;
          const virtualChainId = document.querySelector("#virtual-chain-id").value;
          window.orbsClient = new Orbs.Client(endpoint, virtualChainId, "TEST_NET");
          result = "Created";
        } catch (e) {
          result = "Failed";
        }
        document.querySelector("#orbs-client-result").innerText = result;
      }

      function CreateAccount1() {
        window.account1 = Orbs.createAccount();
        document.querySelector("#account-1-id").innerText = window.account1.publicKey;
      }

      function CreateAccount2() {
        window.account2 = Orbs.createAccount();
        document.querySelector("#account-2-id").innerText = window.account2.publicKey;
      }

      function CreateTx() {
        const [tx, txId] = window.orbsClient.createTransaction(
          window.account1.publicKey,
          window.account1.privateKey,
          "BenchmarkToken",
          "transfer",
          [new Orbs.ArgUint64(10), new Orbs.ArgAddress(window.account2.address)],
        );
        document.querySelector("#tx-id").innerText = txId;
      }
    </script>
  </head>
  <body>
    <form>
      <div>
        <label for="endpoint">Gamma url:</label>
        <input id="endpoint" name="endpoint" type="text" placeholder="endpoint" value="http://localhost:8080" />
      </div>
      <div>
        <label for="virtual-chain-id">Virtual Chain Id:</label>
        <input id="virtual-chain-id" name="virtual-chain-id" type="text" placeholder="virtual chain id" value="42" />
      </div>
    </form>
    <table>
      <thead>
        <tr>
          <td>Step</td>
          <td>Action</td>
          <td id="results-row">Result</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td><button id="create-orbs-client" onclick="CreateOrbsClient()">Create Orbs.Client</button></td>
          <td id="orbs-client-result"></td>
        </tr>
        <tr>
          <td>2</td>
          <td><button id="create-account-1" onclick="CreateAccount1()">Create Account 1</button></td>
          <td id="account-1-id"></td>
        </tr>
        <tr>
          <td>3</td>
          <td><button id="create-account-2" onclick="CreateAccount2()">Create Account 2</button></td>
          <td id="account-2-id"></td>
        </tr>
        <tr>
          <td>3</td>
          <td><button id="create-tx" onclick="CreateTx()">Create Tx</button></td>
          <td id="tx-id"></td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
